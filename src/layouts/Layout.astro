---
import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";
import GtmHead from "../components/gtm-head.astro";
import GtmBody from "../components/gtm-body.astro";
import "../styles/global.css";
import { Image } from 'astro:assets'
import icon from '../assets/images/code.png'

const isHomePage = Astro.url.pathname === "/";
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href={icon.src} />
        <meta name="generator" content={Astro.generator} />
        <title>A.J. Latocha</title>
        <GtmHead />
    </head>
    <body class={isHomePage ? 'home-body' : ''}>
        <GtmBody />
        <Nav />
        <main>
            <slot />
        </main>
        <Footer />

        <script>
            function updateMainPadding() {
                const nav = document.querySelector('.nav') as HTMLElement;
                const main = document.querySelector('main') as HTMLElement;
                if (nav && main) {
                    const navHeight = nav.offsetHeight;
                    main.style.paddingTop = `${navHeight}px`;
                    main.style.minHeight = `calc(100vh - ${navHeight}px)`;
                }
            }

            // Update on initial load
            updateMainPadding();

            // Update when window is resized
            window.addEventListener('resize', updateMainPadding);

            // Update when DOM content is loaded (for safety)
            document.addEventListener('DOMContentLoaded', updateMainPadding);
        </script>
    </body>
</html>

<style>
    .home-body {
        overflow: hidden;
        height: 100vh;
    }

    main {
        /* Initial values before JS runs */
        padding-top: 0;
        min-height: 100vh;
        transition: padding-top 0.2s ease;
    }
</style>
